{"version":3,"sources":["../../src/test/client.js"],"names":["CREDENTIALS","FIXTURES","join","__dirname","client","t","equal","key","secret","_request","Fax","end","ress","Promise","all","send","to","file","body","success","e","console","log","res"],"mappings":";;;;AAAA;;;;AACA;;;;AAEA;;;;;;;;AAEA,IAAMA,cAAc,CAAC,0CAAD,EAA6C,0CAA7C,CAApB,C,CAA8G;AAC9G,IAAMC,WAAW,CACf,eAAKC,IAAL,CAAUC,SAAV,EAAqB,mBAArB,CADe,EAEf,eAAKD,IAAL,CAAUC,SAAV,EAAqB,qBAArB,CAFe,CAAjB;AAIA,IAAMC,4EAAuBJ,WAAvB,KAAN;;AAEA,oBAAK,oBAAL,EAA2B,aAAK;AAC9BK,IAAEC,KAAF,CAAQF,OAAOG,GAAf,EAAoB,0CAApB;AACAF,IAAEC,KAAF,CAAQF,OAAOI,MAAf,EAAuB,0CAAvB;AACAH,IAAEC,KAAF,SAAeF,OAAOK,QAAtB,GAAgC,UAAhC;AACAJ,IAAEC,KAAF,SAAeF,OAAOM,GAAtB,GAA2B,QAA3B;AACAL,IAAEM,GAAF;AACD,CAND;;AAQA,oBAAK,YAAL;AAAA,+BAAmB,WAAMN,CAAN,EAAW;AAC5B,QAAI;AACF,UAAMO,OAAO,MAAMC,QAAQC,GAAR,CAAY,CAC7BV,OAAOM,GAAP,CAAWK,IAAX,CAAgB;AACdC,YAAI,cADU;AAEdC,cAAMhB,SAAS,CAAT;AAFQ,OAAhB,CAD6B,EAK7BG,OAAOM,GAAP,CAAWK,IAAX,CAAgB;AACdC,YAAI,cADU;AAEdC,cAAMhB,SAAS,CAAT;AAFQ,OAAhB,CAL6B,CAAZ,CAAnB;AAUAI,QAAEC,KAAF,CAAQM,KAAK,CAAL,EAAQM,IAAR,CAAaC,OAArB,EAA8B,IAA9B;AACAd,QAAEC,KAAF,CAAQM,KAAK,CAAL,EAAQM,IAAR,CAAaC,OAArB,EAA8B,IAA9B;AACD,KAbD,CAaE,OAAOC,CAAP,EAAU;AACVC,cAAQC,GAAR,CAAYF,CAAZ;AACAf,QAAEC,KAAF,CAAQ,KAAR,EAAe,IAAf;AACD;AACDD,MAAEM,GAAF;AACD,GAnBD;;AAAA;AAAA;AAAA;AAAA;;AAqBA,oBAAK,iBAAL;AAAA,gCAAwB,WAAMN,CAAN,EAAW;AACjCA,MAAEC,KAAF,SAAeF,OAAOM,GAAP,CAAWK,IAA1B,GAAgC,UAAhC;AACA,QAAMQ,MAAM,MAAMnB,OAAOM,GAAP,CAAWK,IAAX,CAAgB;AAChCC,UAAI,cAD4B;AAEhCC,YAAMhB,SAAS,CAAT;AAF0B,KAAhB,CAAlB;AAIAI,MAAEC,KAAF,CAAQiB,IAAIL,IAAJ,CAASC,OAAjB,EAA0B,IAA1B;AACAd,MAAEM,GAAF;AACD,GARD;;AAAA;AAAA;AAAA;AAAA;;AAUA,oBAAK,0BAAL;AAAA,gCAAiC,WAAMN,CAAN,EAAW;AAC1CA,MAAEC,KAAF,SAAeF,OAAOM,GAAP,CAAWK,IAA1B,GAAgC,UAAhC;AACA,QAAMQ,MAAM,MAAMnB,OAAOM,GAAP,CAAWK,IAAX,CAAgB;AAChCC,UAAI,cAD4B;AAEhCC,YAAM,CACJhB,SAAS,CAAT,CADI,EAEJA,SAAS,CAAT,CAFI;AAF0B,KAAhB,CAAlB;AAOAI,MAAEC,KAAF,CAAQiB,IAAIL,IAAJ,CAASC,OAAjB,EAA0B,IAA1B;AACAd,MAAEM,GAAF;AACD,GAXD;;AAAA;AAAA;AAAA;AAAA","file":"client.js","sourcesContent":["import path from 'path';\nimport test from 'tape';\n\nimport Client from '../client.js';\n\nconst CREDENTIALS = ['1a24494b53b5b68817febe1266615b8917c9a5cc', '2ee3a6e464ba2fde41ea8161e2b814ccc1f09b3b']; // TEST\nconst FIXTURES = [\n  path.join(__dirname, 'fixtures/form.pdf'),\n  path.join(__dirname, 'fixtures/form-2.pdf')\n];\nconst client = new Client(...CREDENTIALS);\n\ntest('Client#constructor', t => {\n  t.equal(client.key, '1a24494b53b5b68817febe1266615b8917c9a5cc');\n  t.equal(client.secret, '2ee3a6e464ba2fde41ea8161e2b814ccc1f09b3b');\n  t.equal(typeof client._request, 'function');\n  t.equal(typeof client.Fax, 'object');\n  t.end();\n});\n\ntest('throttling', async t => {\n  try {\n    const ress = await Promise.all([\n      client.Fax.send({\n        to: '+13034404585',\n        file: FIXTURES[0]\n      }),\n      client.Fax.send({\n        to: '+13034404585',\n        file: FIXTURES[1]\n      })\n    ]);\n    t.equal(ress[0].body.success, true);\n    t.equal(ress[1].body.success, true);\n  } catch (e) {\n    console.log(e);\n    t.equal(false, true);\n  }\n  t.end();\n});\n\ntest('Client.Fax.send', async t => {\n  t.equal(typeof client.Fax.send, 'function');\n  const res = await client.Fax.send({\n    to: '+13034404585',\n    file: FIXTURES[0]\n  });\n  t.equal(res.body.success, true);\n  t.end();\n});\n\ntest('Client.Fax.send multiple', async t => {\n  t.equal(typeof client.Fax.send, 'function');\n  const res = await client.Fax.send({\n    to: '+13034404585',\n    file: [\n      FIXTURES[0],\n      FIXTURES[1]\n    ]\n  });\n  t.equal(res.body.success, true);\n  t.end();\n});\n"]}